
<div class="chartGraphs">
    <div class="disasterChart">
      <h2 class="text-4xl font-bold text-center mb-10 text-gray-800">Disaster Types Distribution</h2>
      <canvas id="disasterChart"></canvas>
    </div>
  <br><br>
  <!-- Create a canvas for the X-Y graph -->
  <div class="disasterGraph">
    <h2 class="text-4xl font-bold text-center mb-10 text-gray-800">Deaths vs Disaster Types</h2>
    <canvas id="disasterGraph" width="400" height="200"></canvas>
  </div>
  
  </div>
  
      <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
      <script>
          async function loadGraph() {
            try {
              const response = await fetch('/api/graph-data');
              const counts = await response.json();
        
              const ctx = document.getElementById('disasterChart').getContext('2d');
              new Chart(ctx, {
                type: 'doughnut',
                data: {
                  labels: ['Earthquake', 'Tsunami', 'Flood', 'Cyclone', 'Wildfire', 'Other'],
                  datasets: [{
                    label: 'Disasters',
                    data: [
                      counts.Earthquake,
                      counts.Tsunami,
                      counts.Flood,
                      counts.Cyclone,
                      counts.Wildfire,
                      counts.Other
                    ],
                    backgroundColor: [
                      '#FF6384', // Earthquake
                      '#36A2EB', // Tsunami
                      '#FFCE56', // Flood
                      '#4BC0C0', // Cyclone
                      '#9966FF', // Wildfire
                      '#FF9F40'  // Other
                    ],
                    borderWidth: 1
                  }]
                },
                options: {
                  responsive: true,
                  plugins: {
                    legend: {
                      position: 'bottom',
                    }
                  }
                }
              });
            } catch (err) {
              console.error('Failed to load graph data', err);
            }
          }
        
          window.addEventListener('load', loadGraph);
        </script>
  
  
  <script>
    // Fetch data from the backend
    fetch('/api/deaths-data')
      .then(response => response.json())
      .then(data => {
        // Prepare data for Chart.js
        const disasterTypes = Object.keys(data);
        const deaths = Object.values(data);
  
        const ctx = document.getElementById('disasterGraph').getContext('2d');
        const disasterChart = new Chart(ctx, {
          type: 'bar', // Bar chart
          data: {
            labels: disasterTypes, // X-axis labels (Disaster types)
            datasets: [{
              label: 'Deaths',
              data: deaths, // Y-axis data (Total deaths)
              backgroundColor: 'rgba(255, 99, 132, 0.2)',
              borderColor: 'rgba(255, 99, 132, 1)',
              borderWidth: 1
            }]
          },
          options: {
            scales: {
              y: {
                beginAtZero: true // Ensure the Y-axis starts at zero
              }
            }
          }
        });
      })
      .catch(error => {
        console.error('Error fetching graph data:', error);
      });
  </script>